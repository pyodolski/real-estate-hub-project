## Software Requirements Specification (SRS) & System Testing

### Project Title
**내집**

---

### Project Description
이 프로젝트는 부동산 매물 등록과 검증, 관리, 거래를 통합적으로 지원하는 웹 기반 플랫폼으로서, 사용자가 매물 소유권 증명 서류를 제출하고 관리자가 이를 승인·거절하며 기록하는 과정을 체계적으로 관리할 수 있도록 한다. 또한 전체 매물, 내 매물, 타인 매물 조회 및 상세 정보 확인을 지원하고, 지도 기반 시각화를 통해 매물 위치, 유동인구, 편의시설, 즐겨찾기 매물 등을 직관적으로 확인할 수 있게 한다. 특히 국토교통부 실거래가 데이터를 활용한 시세 비교, 평균·중위 가격 산출, 가격 추세 분석, 이상 거래 탐지, 전세가율 계산기, 머신러닝 기반 시세 예측 기능을 제공하여 사용자에게 신뢰할 수 있는 시장 정보를 제공한다. 이와 함께 매물별 채팅방과 메시지 송수신, 알림 기능, 평점 시스템을 통해 거래 과정의 원활한 소통과 신뢰성을 확보하고, 회원가입·로그인·토큰 관리·프로필 관리 등 사용자 계정 관리 기능으로 안전성을 강화한다. 이를 통해 사용자와 중개인, 관리자 모두에게 효율적이고 투명하며 예측 가능한 부동산 거래 환경을 제공하는 것을 목표로 한다.

---

### Team Members

| Student ID | Name   |
|------------|--------|
| 22213485   | 박차오름 |
| 22213489   | 표주원   |
| 22112123   | 김도림   |
| 22213478   | 김진선   |
| 22112017   | 박진우   |
| 22112353   | 김동근   |

---

|   ID   | 업무명 | 요약 |        세부요구사항 설명        | 입력변수 | 정상 입력값 | 예외 입력값 | 추적성 | 우선순위 | 테스트 결과 |
|:------:|:------:|:---:|:-----------------------:|:-------------------------:|:-------------------:|:--------------------:|:---------:|:------:|:-----------:|
|   1    |매물 등록 신청|||||||||
|  1.1   ||사용자가 매물 소유권 증면을 위한 신청서를 상세정보와 필수 서류와 함께 제출한다.|||||||||
| 1.1.1  |||신청자 정보 입력 폼을 통해 이름, 연락처, 매물과의 관계을 입력한다.|applicantName, applicantPhone, relationshipToProperty|"홍길동", "010-1234-5678", "소유자"|null, "", "abc-defg-hijk"||H|P|
| 1.1.2  |||지도에서 주소 검색 후 좌표 선택 시 주소가 자동 조회되며, 주소 검색 시 지도 API를 통해 해당 위치가 표시된다.|propertyAddress, latitude, longitude|"서울특별시 강남구 테헤란로", 37.5665, 126.9780|"존재하지않는주소123", null, 범위 밖 좌표|4.1.4|H|P|
| 1.1.3  |||소유권 증명 서류 업로드 시 파일 형식과 크기를 검증하고, 저장 시 파일명과 업로드 시간이 기록된다.|documents (MultipartFile[]), documentTypes (String[])|"등기부등본.pdf (2MB)", ["PROPERTY_DEED"]|"file.exe", "11MB 파일"|5.1.2, 5.1.4|H|P|
| 1.1.4  |||필수 입력값(이름, 연락처, 주소, 파일 등)이 올바른 형식이 아닐 경우 오류 메세지를 출력한다.| applicantName, applicantPhone, propertyAddress|"홍길동", "010-1234-5678", "서울시 강남구"|"", null, 빈 문자열||H|P|
| 1.1.5  |||연락처 형식이 잘못되거나 파일 크기 제한을 초과하면 에러 메시지를 출력한다.|applicantPhone, file.getSize()|"010-1234-5678", 5242880 (5MB)|"abc-1234", 11534336 (11MB)||H|P|
|   2    |매물 신청 현황 조회|||||||||
|  2.1   ||사용자가 신청한 매물들의 상태를 확인한다.|||||||||
| 2.1.1  |||관리자를 통해 승인된 신청은 '승인됨'으로 표시한다.|claim.status|Status.APPROVED|null, "INVALID_STATUS"|7.1.3|H|P|
| 2.1.2  |||신청 상태가 '심사중'이면 남은 일수, '거절됨'이면 거절 사유를 함께 표시한다.|claim.status, claim.rejectionReason|Status.PENDING, Status.REJECTED + "서류 불충분"|null|7.1.4|H|P|
| 2.1.3  |||신청에 첨부된 서류는 원본 파일명으로 다운로드 할 수 있다.|documentId|1|999999|5.1.4|H|P|
|   3    |매물 관리 현황 요약|||||||||
|  3.1   ||전체 매물 관리 상황을 한눈에 파악할 수 있도록 요약 정보를 제공한다.|||||||||
| 3.1.1  |||각 상태별 매물 건 수를 계산하여 사용자에게 제공한다.|userId|신규 userId (claims 0건)|null|8.1.2|H|P|
| 3.1.2  |||매물 내역이 존재하지 않으면 "현재 등록된 매물이 없습니다."라는 안내 문구를 출력한다.|userId (신규 사용자)|신규 userId (claims 0건)|null||H|P|
| 3.1.3  |||메물 제목, 주소, 상태, 신청자 정보를 포함한다.|claimId|1 (유효한 신청 ID)|999999 (존재하지 않는 ID)|8.1.3, 8.1.5|H|P|
| 3.1.4  |||승인, 거절, 심사중 상태를 색상과 라벨로 구분해 직관적으로 확인 가능하도록 한다.|claim.status (UI 렌더링)|"APPROVED", "REJECTED", "PENDING"|"INVALID", null||H|P|
|   4    |지도 위치 설정 기능|||||||||
|  4.1   ||사용자가 지도를 통해 정확한 매물 위치를 설정하도록 한다.|||||||||
| 4.1.1  |||사용자는 내 매물 등록 간 확대, 축소, 이동이 가능한 지도를 통해 위치를 탐색할 수 있도록 한다.|지도 조작 버튼|버튼 클릭 이벤트|지도 로드 실패|28.1.1|H|P|
| 4.1.2  |||사용자가 클릭한 위치는 내부 데이터에 저장되고 매물 신청과 연결된다.|locationX, locationY|126.9780, 37.5665|범위 밖 좌표 (예: 200.0, -100.0)|8.1.5|H|P|
| 4.1.3  |||마커 이동 후 해당 좌표에 맞는 주소 정보를 자동으로 업데이트 한다.|마커 드래그 이벤트|유효한 좌표로 이동|잘못된 좌표||H|P|
| 4.1.4  |||입력한 주소를 기반으로 지도 중심이 이동하고 해당 지점에 마커가 표시된다.|주소 검색어|"서울특별시 강남구 테헤란로"|"존재하지않는주소123"||H|P|
| 4.1.5  |||사용자는 별도의 입력 없이 주소 필드에 자동 완성된 정보를 확인 할 수 있다.|좌표 클릭 후 API 호출|API 정상 응답|API 오류||H|P|
|   5    |소유권 증명 서류 업로드|||||||||
|  5.1   ||다양한 종류의 소유권 증명 서류를 업로드 할 수 있다.|||||||||
| 5.1.1  |||사용자는 드롭다운 또는 선택 박스를 통해 서류 타입을 선택할 수 있다.|documentType|"PROPERTY_DEED", "IDENTITY_CARD", "RESIDENCE_CERTIFICATE"|"INVALID_TYPE", null||H|P|
| 5.1.2  |||다른 형식의 파일은 업로드를 제한하고 오류 메시지를 제공한다.|file.getContentType()|"application/pdf", "image/jpeg", "image/png"|"application/exe", "video/mp4"||H|P|
| 5.1.3  |||사용자가 필요에 따라 여러 개의 서류를 제출 할 수 있도록 지원한다.|documents (List<MultipartFile>)|[file1.pdf, file2.jpg]|빈 배열, null||H|P|
| 5.1.4  |||업로드 내역은 DB에 저장되어 추후 관리자가 확인할 수 있도록한다.|파일 업로드 완료|정상업로드|null|7.1.2|H|P|
|   6    |심사 중 매물 신청 수정|||||||||
|  6.1   ||사용자가 심사중인 매물 신청 정보를 수정할 수 있다.|||||||||
| 6.1.1  |||승인,거절 상태일 경우 수정 기능은 비활성화된다.|caim.statusl|Status.PENDING|Status.APPROVED, Status.REJECTED|7.1.3, 7.1.4|H|P|
| 6.1.2  |||사용자는 기존 정보를 기반으로 필요한 항목만 변경 가능하다.|수정 가능 필드|applicantName, applicantPhone, propertyAddress|status, id (읽기 전용)||H|P|
| 6.1.2  |||사용자는 기존 정보를 기반으로 필요한 항목만 변경 가능하다.|||||H|P|
|   7    |관리자 매물 신청 검토 및 처리|||||||||
|  7.1   ||관리자가 신청을 검통하고 승인 또는 거절한다.|||||||||
| 7.1.1  |||관리자는 리스트 형태로 모든 신청 내역을 확인할 수 있다. |admin.role|"admin"|"regular", "broker"|3.1.3|H|P|
| 7.1.2  |||신청자의 입력값과 첨부 서류를 확인 가능하도록한다.|claimId|1 (유효한 claimId)|999999 (존재하지 않는 ID)||H|P|
| 7.1.3  |||승인된 신청은 Proporty 엔티티로 변환된다.|claimId, adminId|PENDING 상태의 claimId, 유효한 adminId|APPROVED/REJECTED 상태의 claimId|8.1.2|H|P|
| 7.1.4  |||인력된 사유는 사용자에게 전달되어야한다.|rejectionReason|"서류 불충분", "주소 불일치"|null, ""|17.1.5|H|P|
|   8    |매물 자동 생성|||||||||
|  8.1   ||승인된 신청 정보를 기반으로 매물을 자동 생성한다.|||||||||
| 8.1.1  |||추후 조회 시 신청과 매물을 서로 참조 할 수 있어야 한다.|claim.property (양방향 참조)|승인된 claim과 생성된 property 간 참조|null|24.1.1, 25.1.1|H|P|
| 8.1.2  |||신청 정보가 DB의 Property 테이블에 새로운 레코드로 추가된다.|claim.status (승인 후)|Status.APPROVED|Status.PENDING, Status.REJECTED||H|P|
| 8.1.3  |||제목은 중복되지 않도록 규칙을 적용한다,.|property.title|"강남구 테헤란로", "강남구 테헤란로 (1)"|중복 제목 (자동으로 (1), (2) 추가)||H|P|
| 8.1.4  |||매물과 사용자 간 관계가 매핑된다.|property.owner (User)|claim.getApplicant() (유효한 User)|null|14.1.1|H|P|
| 8.1.5  |||지도에서 입력한 좌표가 Property 엔티티에 저장된다.|property.locationX, property.locationY|126.9780, 37.5665|null|28.1.4|H|P|
|   9    |중개인 목록 표시|||||||||
|  9.1   ||현재 등록되어있는 중개인의 목록을 확인할 수 있는 기능|||||||||
| 9.1.1  |||사용자가 중개인 목록 아이콘을 클릭하면 현재 등록된 중개인의 목록을 확인할 수 있다.|중개인 목록 버튼 클릭, q, page, size, sort|버튼 클릭, null 또는 "홍길동", 0, 20, "totalDeals,desc"|page=-1, size=0, sort="invalid"|14.1.2|H|P|
| 9.1.2  |||검색창에 아무것도 없는 상태에서는 전체 중개인 목록을 표시한다.|q|null, ""|특수문자 포함 검색어 "@#$"|14.1.2|H|P|
|  9.2   ||현재 등록되어 있는 중개인의 상세정보를 확인할 수 있는 기능|||||||||
| 9.2.1  |||사용자가 중개인 목록에서 상세 정보를 클릭하면 등록 된 중개인의 상세 정보가 표시된다.|중개인 상세보기 버튼 클릭, userId|버튼 클릭, 1 (유효한 중개인 userId)|999999 (존재하지 않는 userId), null|14.1.2|H|P|
| 9.2.2  |||상세정보에는 연락처 정보, 면허번호, 소개, 리뷰 등 중개인의 정보를 표시한다.|userId|1 (활성화된 중개인)|비활성화된 중개인, 일반 사용자 userId|15.1.2, 18.1.5|H|P|
| 9.2.3  |||총 거래 수와 진행 중인 거래 수를 상세정보에 표시한다.|userId|1 (거래 이력 있는 중개인)|거래 이력 없는 중개인|16.5.1|H|P|
|   10   | 회원가입 |  |  |  |  |  |  |  |  |
|  10.1  |  | 사용자가 이메일·비밀번호·닉네임을 입력하여 계정을 생성한다. |  |  |  |  |  |  |  |
| 10.1.1 |  |  | 이메일은 기본 형식을 따라야 하며, 이미 가입된 이메일은 사용할 수 없다. | 이메일 | "user@example.com" | @가 포함되지 않은 이메일, 이미 가입된 이메일 주소 | 2.1.1 | H | P |
| 10.1.2 |  |  | 비밀번호는 최소 8자 이상이어야 한다. | 비밀번호 | "Abcd1234!" | 8자 미만의 비밀번호, 비밀번호를 입력하지 않은 경우 | 2.1.4 | H | P |
| 10.1.3 |  |  | 중개인 가입 시 자격증 번호는 필수이며 형식에 맞아야 한다. | 자격증 번호 | "12-345678" | 형식이 맞지 않은 자격증 번호, 자격증 번호를 입력하지 않은 경우 | 2.1.3 | H | P |
| 10.1.4 |  |  | 이용약관에 동의하지 않으면 가입 버튼이 비활성화된다. | 약관 동의 체크박스 | 체크함 | 약관 동의를 선택하지 않은 경우 | 2.1.5 | M | P |
|   11   | 로그인 / 토큰 관리 |  |  |  |  |  |  |  |  |
|  11.1  |  | 사용자가 로그인 후 토큰을 발급받아 인증을 유지한다. |  |  |  |  |  |  |  |
| 11.1.1 |  |  | 이메일과 비밀번호로 로그인을 시도한다. | 이메일, 비밀번호 | 가입된 이메일 + 올바른 비밀번호 | 가입되지 않은 이메일 입력, 비밀번호 불일치 | 10.1.3 | H | P |
| 11.1.2 |  |  | 로그인 성공 시 AccessToken과 RefreshToken을 발급한다. | 로그인 요청 | 정상 로그인 요청 | 로그인 실패 상태에서 토큰이 발급되는 경우 |  | H | P |
| 11.1.3 |  |  | 로그인 유지 선택 여부에 따라 토큰 만료 기간이 달라진다. | 로그인 상태 유지 옵션 | 체크함 | 옵션을 무시하여 항상 같은 기간으로 만료 설정되는 경우 |  | H | P |
| 11.1.4 |  |  | 로그인 실패 시 오류 메시지를 표시한다. | 이메일, 비밀번호 | 올바른 입력값 | 존재하지 않는 이메일 입력, 비밀번호 불일치 |  | H | P |
| 11.1.5 |  |  | 로그인 성공 시 사용자 역할에 따라 메인 화면이 달라진다. | 사용자 역할 | 일반/중개사/관리자 | 역할 정보가 잘못 설정된 계정으로 로그인 시 화면 진입 불가 | 10.1.1 | H | P |
| 11.1.6 |  |  | RefreshToken으로 AccessToken 재발급이 가능하다. | 로그인 유지 정보 | 유효한 RefreshToken | 만료된 토큰, 삭제된 토큰 |  | H | P |
| 11.1.7 |  |  | 만료 또는 폐기된 RefreshToken 사용 시 오류를 반환한다. | 로그인 유지 정보 | 정상 RefreshToken | 로그아웃으로 폐기된 토큰 사용, 만료된 토큰 사용 | 12.1.1 | H | P |
|   12   | 로그아웃 |  |  |  |  |  |  |  |  |
|  12.1  |  | 사용자가 로그아웃하여 인증 세션을 종료한다. |  |  |  |  |  |  |  |
| 12.1.1 |  |  | RefreshToken을 무효화하여 재사용을 막는다. | 로그아웃 요청 | 로그인된 상태에서 로그아웃 실행 | 이미 삭제된 토큰으로 로그아웃 요청 | 11.1.2 | H | P |
| 12.1.2 |  |  | 브라우저 저장소(Local/SessionStorage, 쿠키)의 토큰을 삭제한다. | 저장된 토큰 정보 | 정상 삭제됨 | 로그아웃 후에도 저장소에 토큰이 남아 있는 경우 | 11.1.2 | H | P |
| 12.1.3 |  |  | 로그아웃 이후 보호된 API 접근 시 인증 실패 처리된다. | 보호된 기능 접근 | 로그인되지 않은 상태에서 접근 차단 | 로그아웃했는데도 API 호출이 정상 처리되는 경우 | 11.1.6 | H | P |
|   13   | 비밀번호 재설정 |  |  |  |  |  |  |  |  |
|  13.1  |  | 사용자가 비밀번호를 재설정할 수 있도록 한다. |  |  |  |  |  |  |  |
| 13.1.1 |  |  | 비밀번호 찾기 요청 시 재설정 링크가 포함된 이메일을 발송한다. | 이메일 | 가입된 이메일 주소 | 가입되지 않은 이메일을 입력한 경우 | 11.1.2 | H | P |
| 13.1.2 |  |  | 재설정 링크의 토큰은 1시간 동안만 유효하다. | 재설정 토큰 | 발송된 지 1시간 이내의 토큰 | 발송된 지 1시간이 지난 토큰, 이미 사용된 토큰 | 11.1.7 | H | P |
| 13.1.3 |  |  | 이메일 링크를 클릭하면 재설정 화면으로 이동한다. | 재설정 토큰 | 정상 토큰 | 변조된 토큰, 잘못된 토큰 값 |  | H | P |
| 13.1.4 |  |  | 새 비밀번호 입력 시 토큰을 검증하고 비밀번호를 변경한다. | 새 비밀번호 | 8자 이상 비밀번호 | 만료된 토큰 사용, 잘못된 토큰 사용 | 14.2.5 | H | P |
| 13.1.5 |  |  | 새 비밀번호는 기존 비밀번호와 달라야 한다. | 새 비밀번호 | 기존과 다른 비밀번호 | 기존 비밀번호와 동일, 8자 미만 | 14.2.4 | H | P |
| 13.1.6 |  |  | 비밀번호 변경 완료 후 로그인 페이지로 이동한다. | 비밀번호 변경 요청 | 정상 변경 후 로그인 화면 이동 | 변경 실패 상태에서 로그인 화면으로 이동하는 경우 | 11.1.1 | H | P |
|   14   | 사용자 프로필 관리 |  |  |  |  |  |  |  |  |
|  14.1  |  | 사용자가 자신의 프로필 정보를 조회한다. |  |  |  |  |  |  |  |
| 14.1.1 |  |  | “내 정보” 화면에서 이메일, 닉네임, 역할, 전화번호, 소개글 등을 조회한다. | 조회 요청 | 로그인된 사용자 | 로그인하지 않은 사용자가 접근하는 경우 | 11.1.2 | H | P |
| 14.1.2 |  |  | 브로커 계정은 자격증 번호·사무소명 등이 추가 표시된다. | 조회 요청 | 브로커 계정 | 일반 사용자가 브로커 페이지에 접근한 경우 | 10.1.2 | H | P |
|  14.2  |  | 사용자가 자신의 프로필 및 태그를 수정한다. |  |  |  |  |  |  |  |
| 14.2.1 |  |  | 프로필 수정 시 현재 비밀번호를 검증한다. | 현재 비밀번호 | 올바른 현재 비밀번호 | 비밀번호가 일치하지 않는 경우 | 11.1.1 | H | P |
| 14.2.2 |  |  | 소개글·태그·사진 등을 수정할 수 있다. | 프로필 정보 | 정상 입력값 | 권한/역할 등 사용자가 변경할 수 없는 항목을 조작하는 경우 | 13.1.1 | H | P |
| 14.2.3 |  |  | 태그는 최대 30개, 중복 불가이며 수정 시 전체 재등록된다. | 태그 목록 | 중복 없는 30개 이하 태그 | 동일 태그를 여러 번 입력, 31개 이상 태그 입력 | 40.1.3 | H | P |
| 14.2.4 |  |  | 비밀번호 변경 시 기존 비밀번호와 다른지 검사한다. | 새 비밀번호 | 기존과 다른 8자 이상 비밀번호 | 기존 비밀번호와 동일, 길이 제한 미충족 | 11.1.1 | H | P |
| 14.2.5 |  |  | 변경된 비밀번호는 즉시 적용되어 기존 비밀번호로 로그인할 수 없다. | 로그인 요청 | 변경 후 새 비밀번호로 로그인 성공 | 변경 후에도 기존 비밀번호가 계속 로그인되는 경우 |  | H | P |
|   15   | 위임 관리 |  |  |  |  |  |  |  |  |
|  15.1  |  | 소유자는 본인 매물에서 브로커에게 위임 요청을 보낼 수 있다. |  |  |  |  |  |  |  |
| 15.1.1 |  |  | 거래 유형에 따라 필요한 금액 정보를 반드시 입력해야 한다. | 거래 유형, 매매가/보증금/월세 | “매매 + 5억”, “전세 + 3억”, “월세 + 보증금 1억·월세 80만 원” | 매매 선택 후 매매가 미기입, 전세 선택 후 보증금 미입력, 월세 선택 후 보증금 또는 월세가 비어 있는 경우 | 26.1.3 | H | P |
| 15.1.2 |  |  | 동일 매물에 이미 대기 중 요청이 있으면 새 요청을 보낼 수 없다. | 위임 요청 버튼 | 기존 요청 없음 상태에서 정상 전송 | 동일 매물에 이미 PENDING 상태의 요청이 존재하는 경우 | 15.2.3 | H | P |
| 15.1.3 |  |  | 위임 요청을 보낼 브로커는 실제 등록된 중개사여야 한다. | 브로커 선택 | 중개사 목록에서 선택 | DB에 존재하지 않는 브로커 ID를 조작해 전송한 경우 | 14.1.2 | H | P |
| 15.1.4 |  |  | 요청이 성공적으로 접수되면 상태는 ‘대기 중(PENDING)’이 된다. | 위임 요청 제출 | 정상 요청 → 상태가 PENDING으로 저장 | 요청 직후 상태가 APPROVED·REJECTED로 잘못 저장되는 경우 | 15.3.1 | H | P |
|  15.2  |  | 브로커는 들어온 요청을 승인 또는 거절할 수 있다. |  |  |  |  |  |  |  |
| 15.2.1 |  |  | 승인 시 해당 매물이 중개사 매물 목록에 등록된다. | 승인 버튼 | 브로커가 승인 | 다른 브로커 또는 소유자가 승인 시도, 이미 처리된 요청을 다시 승인하는 경우 | 24.1.1 | H | P |
| 15.2.2 |  |  | 요청 거절 시 사유 입력이 가능하다. | 거절 버튼, 사유 입력칸 | 사유 입력 후 정상 거절 | 사유 없이 거절(저장은 가능하지만 사유 필드가 비어 있음) | 7.1.4 | H | P |
| 15.2.3 |  |  | 이미 처리된 요청은 다시 승인/거절할 수 없다. | 승인/거절 버튼 | 처리 전 요청에서 정상 동작 | 이미 승인/거절/취소된 요청에 대해 다시 승인/거절 시도 |  | H | P |
|  15.3  |  | 소유자는 자신이 보낸 요청을 확인하고, 대기 중인 요청은 취소할 수 있다. |  |  |  |  |  |  |  |
| 15.3.1 |  |  | 대기 중 요청 취소 시 상태가 ‘취소됨(CANCELED)’으로 변경된다. | 취소 버튼 | PENDING 상태 요청에서 정상 취소 | 이미 승인/거절된 요청에서 취소 시도 | 15.4.1 | H | P |
|  15.4  |  | 소유자는 자신이 보낸 위임 요청을 삭제할 수 있다. |  |  |  |  |  |  |  |
| 15.4.1 |  |  | 승인된 요청은 삭제할 수 없고 대기/거절/취소된 요청만 삭제된다. | 삭제 버튼 | PENDING/REJECTED/CANCELED → 삭제 가능 | 승인된 요청 삭제 시도 | 15.2.1 | H | P |
|  15.5  |  | 브로커 선택 화면에서 각 브로커의 거래 건수를 확인할 수 있다. |  |  |  |  |  |  |  |
| 15.5.1 |  |  | 진행 중 거래 건수와 완료된 거래 건수가 표시된다. | 브로커 정보 | “진행 중 2건 / 완료 5건” | 음수 또는 갱신 실패로 잘못 표시되는 경우 |  | H | P |
|   16   | 알림 기능 |  |  |  |  |  |  |  |  |
|  16.1  |  | 시스템에서 조건을 만족할 시 사용자에게 알림을 전송한다. |  |  |  |  |  |  |  |
| 16.1.1 |  |  | 매물 승인 시 소유자에게 승인 알림을 전송한다. | 승인 처리 | 승인 대기 매물 승인 | 이미 승인된 매물 재승인, 승인 대상 아닌 매물 승인 | 7.1.3 | H | P |
| 16.1.2 |  |  | 매물 거절 시 소유자에게 거절 알림을 전송한다. | 거절 처리 | 정상 거절 | 승인 상태 매물에 거절 처리 | 7.1.4 | H | P |
| 16.1.3 |  |  | 추천 조건을 만족하는 새 매물 등록 시 추천 알림 전송. | 추천 대상 매물 등록 | 조건 부합 시 추천 알림 생성 | 조건 불일치 매물인데 알림 생성, 비대상 사용자에게 발송 | 40.1.8 | H | P |
| 16.1.4 |  |  | 채팅 메시지 도착 시 방의 다른 참여자에게 알림. | 채팅 메시지 발송 | 참여자에게 알림 | 본인에게 알림 발생, 참여자가 아닌 사용자에게 알림 | 20.1.3 | H | P |
| 16.1.5 |  |  | 거래 완료 시 구매자에게 구매 완료 알림 전송. | 거래 완료 버튼 | 구매자에게 알림 생성 | 구매자 아닌 사람에게 전송, 거래 완료되지 않았는데 알림 생성 | 18.1.2 | H | P |
| 16.1.6 |  |  | 시스템 공지 등록 시 전체 사용자에게 업데이트 알림. | 공지 등록 | 전체 사용자에게 알림 | 특정 사용자만 누락, 권한 없는 계정이 등록했음에도 알림 생성 | (관리자 기능) | H | P |
| 16.1.7 |  |  | 경매에 새 입찰 생성 시 매물 소유자에게 알림. | 입찰 제출 | 정상 입찰 시 소유자 알림 | 종료된 경매, 잘못된 경매 ID | 41.2.6 | H | P |
| 16.1.8 |  |  | 새 입찰이 기존 최고가를 넘으면 기존 최고 입찰자에게 ‘상회됨’ 알림 전송. | 최고가 초과 입찰 | 기존 최고 입찰자에게 알림 | 첫 입찰인데 잘못 발송, 최고가보다 낮은 금액에 발송 | 41.2.7 | H | P |
| 16.1.9 |  |  | 경매 종료 시 모든 참여 브로커에게 종료 알림 전송. | 입찰 수락(경매 종료) | 모든 참여자에게 종료 알림 | 참여하지 않은 브로커에게 발송, 일부 누락 | 41.3.8, 41.3.9 | H | P |
|  16.2  |  | 사용자가 알림 목록을 확인한다. |  |  |  |  |  |  |  |
| 16.2.1 |  |  | 알림 아이콘을 통해 목록을 열 수 있다. | 알림 아이콘 | 정상 표시 | 비로그인 상태에서 진입 |  | H | P |
| 16.2.2 |  |  | 알림은 최신순이며 읽음/안읽음을 구분해 표시한다. | 알림 목록 | 최신순 정렬 | 정렬 오류, 읽음 상태 표시 오류 | 22.1.1, 22.1.3 | H | P |
| 16.2.3 |  |  | 개별 읽음/삭제 또는 전체 읽음 처리가 가능하다. | 읽음/삭제 버튼 | 정상 반영 | 다른 사용자의 알림이 처리됨, 삭제된 알림 재삭제 시 오류 | 22.1.2 | H | P |
| 16.2.4 |  |  | 네트워크 오류 시 캐시된 알림 우선 표시. | 알림 목록 로드 | 캐시 표시 + 오류 안내 | 빈 화면 출력 |  | H | P |
| 16.2.5 |  |  | 승인 알림 클릭 시 관련 매물 화면으로 이동. | 승인 알림 | 정상 이동 | 삭제된 매물로 이동 시 오류 안내 없음 | 16.1.1 | H | P |
| 16.2.6 |  |  | 거절 알림 클릭 시 거절 사유 확인. | 거절 알림 | 사유 표시 정상 | 사유 누락, 잘못된 매물로 연결 | 16.1.2 | H | P |
| 16.2.7 |  |  | 추천 매물 알림 클릭 시 상세로 이동. | 추천 알림 | 정상 페이지 이동 | 삭제된 매물 연결 오류 | 16.1.3 | H | P |
| 16.2.8 |  |  | 새 채팅 알림 클릭 시 해당 채팅방으로 이동. | 채팅 알림 | 정상 이동 | 삭제된 채팅방 접근 시 오류 | 16.1.4 | H | P |
| 16.2.9 |  |  | 시스템 업데이트 알림은 공지 상세 화면으로 이동. | 시스템 업데이트 알림 | 정상 표시 | 지난 공지인데 계속 상단 고정 | 16.1.6 | H | P |
| 16.2.10 |  |  | 구매 완료 알림 클릭 시 관련 거래 정보를 표시. | 구매 완료 알림 | 정상 이동 | 완료되지 않은 거래가 표시됨 | 16.1.5 | H | P |
| 16.2.11 |  |  | 경매 새 입찰 도착 알림 클릭 시 경매 상세로 이동. | 새 입찰 알림 | 정상 이동 | 종료된 경매 연결 오류 | 16.1.7 | H | P |
| 16.2.12 |  |  | 내 입찰 상회 알림 클릭 시 새로운 최고가 확인 가능. | 상회 알림 | 정상 이동 | 상회되지 않았는데 알림 생성 | 16.1.8 | H | P |
| 16.2.13 |  |  | 경매 종료 알림 클릭 시 낙찰 여부 확인 가능. | 경매 종료 알림 | 정상 이동 | 실제 낙찰 여부와 다르게 표시 | 16.1.9 | H | P |
|   19   | 채팅방 접속 및 생성 ||                                                                                                     |||||      ||
|  19.1  |             |사용자가 매물 상세 페이지에서 채팅방에 접속하거나, 없을 경우 새로운 채팅방을 생성한다.	|                                                                                                     |||||      ||
| 19.1.1 |             ||                           사용자가 매물 상세 화면에서 '대화하기' 버튼을 클릭하면 채팅방에 접속을 시도한다.                            | 버튼 | "대화하기" | null | 26.1.1 | H | P |
| 19.1.2 |             ||                                  기존에 해당 매물에 대한 채팅방이 있으면 그대로 입장한다.                                  | propertyId | 101 | -1, null | 21.1.1 | H | P |
| 19.1.3 |             ||                                        채팅방이 없다면 새 채팅방이 생성된다.                                | propertyId | 101 | null |  | H | P |
| 19.1.4 |             ||                             참여자는 2명(매도인–매수인) 또는 3명(판매자–중개인–구매자)으로 제한된다.                 | 참여자 배열 | [A,B], [A,B,C] | [A,B,C,D] | 16.2.1 | H | P |
| 19.1.5 |             ||                            사용자와 매물이 중복되는 채팅방에는 들어갈 수 없으며, 중복 시 오류가 발생한다.                        | userId, propertyId | (10,101) | (10,101) 중복 |  | H | P |
| 19.1.6 |             ||                                     채팅방에는 참여자 정보와 생성 시각이 기록된다.                                | - | 자동 기록 | DB 오류 | 15.1.1 | H | P |
|   20   |메시지 송수신             ||                                                                                                     |||||      ||
|  20.1  |             |사용자가 채팅방에서 메시지를 주고받을 수 있다.	|                                                                                                     |||||      ||
| 20.1.1 |             ||                                     사용자가 채팅방에서 메시지를 주고받을 수 있다.	                            | message | "안녕하세요" | "" / null || H | P |  ||
| 20.1.2 |             ||                                  메시지가 비어 있으면 전송되지 않고 오류 안내가 표시된다.                    | message | "테스트" | "" || H | P |
| 20.1.3 |             ||                                메시지는 즉시 상대방에게 전달되며, 동시에 대화 내역에 저장된다.                          | message | "문의드립니다" | null || H | P |
| 20.1.4 |             ||                                  메시지에는 발신자, 발신 시각, 읽음 여부가 함께 기록된다.                               | - | 자동 | - || H | P |
| 20.1.5 |             ||                               사용자는 채팅방에서 이전 메시지를 불러와 시간순으로 확인할 수 있다.                          | scroll event | scroll-top | null || H | P |
|   21   |     기존 대화 내역 불러오기        ||                                                                                                     |||||      ||
|  21.1  |             |사용자가 채팅방에 재접속했을 때 과거 메시지를 확인할 수 있다.|                                                                                                     |||||      ||
| 21.1.1 |             ||                            사용자가 채팅방에 입장하면 가장 최근 메시지부터 일정 개수의 메시지가 표시된다.            | propertyId | 101 | null || H | P |
| 21.1.2 |             ||                     더 오래된 메시지가 필요할 경우 사용자는 스크롤 또는 요청을 통해 과거 메시지를 추가로 불러올 수 있다.    | scroll event | scroll-top | null || H | P |
| 21.1.3 |             ||                                        메시지는 시간순으로 정렬되어 표시된다.                                    | - | 자동 | - || H | P |
|   22   | 읽음 처리            ||                                                                                                     |||||      ||
|  22.1  |             |사용자가 읽은 메시지를 표시하고, 상대방도 이를 확인할 수 있다.|                                                                                                     |||||      ||
| 22.1.1 |             ||                               사용자가 채팅방에서 메시지를 확인하면 해당 메시지는 읽음 처리 된다.                           | read event | 메시지ID=1 | null | 22.1.1 | H | P |
| 22.1.2 |             ||                                   모든 미확인 메시지를 한 번에 읽음 처리할 수도 있다.                            | 버튼 | "모두 읽음" | null |  | H | P |
| 22.1.3 |             ||                                  읽지 않은 메시지 개수는 채팅방 목록이나 알림에 표시된다.                       |  |  |  | 17.2.2 | H | P |
|   23   | 재접속 시 이어보기            ||                                                                                                     |||||      ||
|  23.1  |             |사용자가 채팅방에 다시 들어왔을 때 마지막으로 본 지점 이후의 메시지만 확인할 수 있다.|                                                                                                     |||||      ||
| 23.1.1 |             ||                      사용자가 채팅방을 나갔다가 다시 들어오면, 마지막으로 읽었던 메시지 이후의 새로운 메시지만 표시된다.    |  |  |  | 22.1.1 | H | P |
| 23.1.2 |             ||                        이를 통해 불필요하게 과거 내역을 반복해서 불러오지 않고, 효율적으로 대화를 이어볼 수 있다.              |  |  |  |  | H | P |
|   24   | 내 매물 관리            ||                                                                                                     |||||      ||
|  24.1  |             |사용자가 본인이 등록한 매물을 따로 확인한다.|                                                                                                     |||||      ||
| 24.1.1 |             ||                            사용자는 로그인 후 `내 매물` 메뉴에서 자신이 등록한 매물만 확인할 수 있다.               | userId | 10 | null | 8.1.4, 12.1.2 | H | P |
| 24.1.2 |             ||                                  필터와 정렬 방식은 전체 목록과 동일하게 사용할 수 있다.                    | filter | "최신순" | null |  | H | P |
| 24.1.3 |             ||                              자신의 매물을 수정하고자 할 때에는 삭제 후 재인증으로 변경할 수 있다.      | propertyId | 1001 | null | 6.1.2 | H | P |
|   25   |   상의 매물 조회          ||                                                                                                     |||||      ||
|  25.1  |             |사용자가 다른 소유자가 등록한 매물만 확인한다.	|                                                                                                     |||||      ||
| 25.1.1 |             ||                                로그인 사용자는 자신이 등록하지 않은 매물만 따로 조회할 수 있다.   | userId | 10 | null | 8.1.4, 12.1.2 | H | P |
| 25.1.2 |             ||                                      필터와 정렬 기능은 전체 목록과 동일하다.	              | filter | "면적순" | null |  | H | P |
| 25.1.3 |             ||                               다른 소유자의 매물이라도 기본 정보와 거래 조건은 열람할 수 있다.	          | propertyId | 999 | null | 26.1.2, 26.1.3 | H | P |
|   26   |   매물 상세 조회          ||                                                                                                     |||||      ||
|  26.1  |             |사용자가 특정 매물의 세부 내용을 확인한다.|                                                                                                     |||||      ||
| 26.1.1 |             ||      로그인 사용자는 특정 매물을 선택해 상세 정보를 볼 수 있다.	 | propertyId | 101 | null | 12.1.2 | H | P |
| 26.1.2 |             ||   상세 정보에는 제목, 주소, 가격, 면적, 건축년도, 거래 상태 등이 포함된다.	   |  |  |  | 8.1.2, 8.1.3 | H | P |
| 26.1.3 |             ||    추가로 매물에 연결된 거래 조건(매매/전세/월세, 보증금, 관리비 등)도 확인할 수 있다.	   |  |  |  | 37.1.1 | H | P |
| 26.1.4 |             ||    타인의 매물도 상세 정보를 열람할 수 있다.	   | propertyId | 102 | null | 25.1.1 | H | P 
| 28 | 지도매물 시각화 | | | | | | | | |
| 28.1 | | 사용자의 지도 화면에 매물 위치를 아이콘으로 표시한다. | | - | - | - | | | P |
| 28.1.1 | | | 네이버 지도 API를 이용하여 지도를 띄운다. | API_KEY, div ID | 유효 KEY + id="map" | KEY 만료, div 오타 | | H | P |
| 28.1.2 | | | 로그인을 하지 않아 토큰이 없으면 오류 메시지를 띄우며 로그인 페이지로 이동한다. | - | - | - | 12.1.2 | H | P |
| 28.1.3 | | | 지도 호출 실패시 재시도 및 오류를 출력한다. | - | - | - | | H | P |
| 28.1.4 | | | 등록된 매물의 위치 정보를 불러와 지도에 마커와 함께 표시한다 | bounds(swLat 등) | 정상 좌표 범위 | swLat > neLat, 잘못된 좌표 | 8.1.5 | H | P |
| 28.1.5 | | | 매물의 상태 정보[available,pending,sold] 기준으로 색상 변경 | status 값 | available/pending/sold | null, unknown | 3.1.4 | H | P |
| 28.1.6 | | | 매물 클릭 시 DB에서 정보를 받아와 표시 | property_id | 101, 202 등 | -1, 존재하지 않는 ID | 31.1.1 | H | P |
| 28.1.7 | | | 일정 시간 후 지도를 재조회하여 정보 갱신 | refresh interval | 60초, 120초 | 0, 음수, 문자열 | | H | P |
| 28.1.8 | | | 지도 zoom·pan 시 범위 재조회 및 마커 갱신 | zoom / bounds | zoom 14→16 정상 | zoom=-1, bounds null | 35.1.1 | H | P |
| 28.1.9 | | | 사용자 지정 필터 적용 시 필터된 매물만 표시 | 거래유형, 가격 등 | JEONSE / 가격범위 적합 | 거래유형=“ABC”, 최소>최대 | 33.1.1 | H | P |
| 30 | 지도 매물 즐겨찾기 | | | | | | | | |
| 30.1 | | 즐겨찾기를 조회한다 | | - | - | - | | | P |
| 30.1.1 | | | 즐겨찾기 탭 클릭 시 저장된 즐겨찾기 목록을 조회 | limit, offset | limit=100, offset=0 | limit=-1, offset="a" | | H | P |
| 30.1.2 | | | 현재 로그인된 아이디 토큰으로 해당 즐겨찾기 표시 | - | - | - | 12.1.2 | H | P |
| 30.1.3 | | 조회된 매물 정보 확인한다 | | property_id | 존재하는 ID | 삭제된 ID | | H | P |
| 30.1.4 | | | 즐겨찾기 항목 클릭 → 지도 이동 + 상세정보 열기 | lat, lng | 정상 좌표 | lat=null, (0,0) | 31.1.1 | H | P |
| 30.2 | | 정보확인에 실패한다 | | | | | | | |
| 30.2.1 | | | 정보 확인 실패 시 실패 원인 출력 | - | - | - | | H | P |
| 30.3 | | 즐겨찾기 추가한다 | | | | | | | |
| 30.3.1 | | | 하트 클릭 시 즐겨찾기 저장 | property_id, 토큰 | 정상 ID + 정상 토큰 | property_id=null, 토큰 없음 | 12.1.2 | H | P |
| 30.3.2 | | | 즐겨찾기 등록 후 하트 빨간색 + DB 추가 | 버튼 상태 | OFF → ON 정상 | DB 오류, 중복 등록 | 30.4.2 | H | P |
| 30.4 | | 즐겨찾기 제거한다 | | | | | | | |
| 30.4.1 | | | 빨간 하트 클릭 시 즐겨찾기 해제 | property_id, 토큰 | 정상 ID | 토큰 없음, favorites에 없음 | 12.1.2 | H | P |
| 30.4.2 | | | 하트 회색 → DB 삭제 | favorites row | row 존재 | 이미 삭제된 row | | H | P |
| 31 | 매물 상세 정보 표시 | | | | | | | | |
| 31.1 | | 매물 클릭 시 상세 정보창 표시 | | - | - | - | | | P |
| 31.1.1 | | | property_id 획득 후 API 호출 | property_id | 101, 202 | -1, 문자 | 26.1.1 | H | P |
| 31.1.2 | | | 받은 정보를 사이드바에 렌더링 | 응답 JSON | title, price 정상 | title null, price null | 26.1.2 | H | P |
| 32.1 | | 매물 정보 표시 실패 | | | | | | | |
| 32.1.1 | | | 실패 시 실패 표시 + 새로고침 | - | - | - | 28.1.7 | H | P |
| 33 | 필터 | | | | | | | | |
| 33.1 | | 개별 필터를 지정한다 | | | | | | | |
| 33.1.1 | | | property_offers, properties 기반 필터 적용 | 거래유형/가격 | JEONSE, 0~3억 | 가격 최소>최대, 잘못된 유형 | 26.1.2, 26.1.3 | H | P |
| 33.1.2 | | | 필터는 ‘적용’ 클릭 후 반영 | - | - | - | 28.1.7 | H | P |
| 33.1.3 | | | 필터 미사용 시 전체 매물 표시 | 필터 상태 | OFF | 상태 null | 28.1.4 | H | P |
| 33.2 | | 종합 필터를 지정한다 | | | | | | | |
| 33.2.1 | | | 모든 필터 지정 후 적용 | 가격/평수/준공연도 | 정상 범위 입력 | 최소>최대 | 33.1.1 | H | P |
| 33.3 | | 필터 지정 실패 | | | | | | | |
| 33.3.1 | | | 실패 시 오류 메시지 + 필터 해제 | - | - | - | | H | P |
| 36 | 편의시설 레이어 토글 | | | | | | | | |
| 36.1 | | 뷰포트·근방의 편의시설 POI 표시 | | | | | | | |
| 36.1.1 | | | 반경 내 POI 요청 후 마커/클러스터 표시 | 카테고리, 좌표 | ON, ["SUBWAY","BUS"], 정상 lat/lng | 카테고리 빈배열, 좌표 null | 28.1.8 | H | P |
| 36.1.2 | | | feature ≥ threshold 시 클러스터링 적용 | - | - | - | | H | P |
| 36.2 | | 카테고리별 아이콘·색·반경 정의 | | | | | | |
| 36.2.1 | | | 각 카테고리별 아이콘 지정 | 카테고리 코드 | SUBWAY → subway.svg | 잘못된 코드, 경로 404 | | H | P |
| 36.3 | | 편의시설 상세 패널 표시 | | | | | | |
| 36.3.1 | | | 마커 클릭 시 상세 정보 패널 표시 | POI JSON | name, address, rating 정상 | name null, rating null | 31.1.2 | H | P |
|   37   | 전세가율 계산기 |  |  |  |  |  |  |  |  |
|  37.1  |  | 매물의 매매가 대비 전세가율을 계산하여 표시한다. |  |  |  |  |  |  |  |
| 37.1.1 |  |  | DB에서 전세 보증금과 매매가를 불러와 (전세가/매매가)×100을 계산한다. | 전세가율 보기 버튼 | “전세 3억 / 매매 4억” | 전세 보증금이 없거나 0원인 경우, 매매가가 누락된 경우 | 26.1.3 | H | P |
| 37.1.2 |  |  | 매매가가 없을 경우 “정보 없음” 표시. | 전세가율 조회 | 전세 보증금만 존재 | 매매가가 null이거나 0원인데 0%로 잘못 표시되는 경우 |  | H | P |
| 37.1.3 |  |  | 주변 매물의 전세가율 평균과 비교하여 높음/낮음 표시. | 주변 비교 영역 | 충분한 주변 매물 존재 | 주변 매물 부족, 계산 시 평균이 0으로 나오는 오류 | 10.4.1 | H | P |
| 37.1.4 |  |  | 매매가가 없을 경우 AI 예측가(또는 직접 입력값)를 사용해 전세가율 계산. | 예상 매매가 입력값 | 1억 이상 정상 값 | 예상 매매가가 0 또는 음수 | 39.1.2 | H | P |
| 40 | 추천매물 | | | | | | | | |
| 40.1 | | AI 기반 알고리즘으로 개인화 추천 | | | | | | | |
| 40.1.1 | | | 로그인 시 추천 섹션 접근 | - | - | - | 12.1.2 | H | P |
| 40.1.2 | | | 상세페이지 진입 시 로그 저장 | user_id, property_id | 정상값 | null, -1 | 26.1.1, 15.2.3 | H | P |
| 40.1.3 | | | 수집 데이터 검증 및 인코딩/정규화 | raw data | price>0, area>0 | 음수 가격, null | 40.1.6 | H | P |
| 40.1.4 | | | 전체 매물 vector화 | properties | 필수값 존재 | price null 등 | 8.1.2 | H | P |
| 40.1.5 | | | 유사도 계산 후 정렬 | user_vector | 차원 일치 | 차원 불일치 | 40.1.5 | H | P |
| 40.1.6 | | | 추천 목록 표시 | 추천 리스트 | 상위 5개 정상 표시 | 빈 리스트 | 40.1.7 | H | P |
| 40.1.7 | | | 신규 매물 클릭 시 재정렬 | property_id | 정상 ID | null | 40.1.7 | H | P |
| 40.1.8 | | | 동일 매물 반복 조회 시 감점하여 제외 | click count | count>=3 | count 미적용 버그 | 40.1.3 | H | P |
|   41   | 경매 기능 | 매물에 대해 브로커 경매를 생성하고 입찰·낙찰·종료를 관리한다. |  |  |  |  |  |  |  |
|  41.1  | 경매 생성 |  |  |  |  |  |  |  |  |
| 41.1.1 |  |  | 소유자는 자신의 매물에 대해 새로운 경매를 시작할 수 있다. | 경매 시작 버튼 | 본인 매물 → 경매 생성 화면 이동 | 소유자가 아닌 사람이 요청 시도 |  | H | P |
| 41.1.2 |  |  | 거래 유형·주거 형태·층수 등 필수 조건 입력 필요. | 거래 유형, 주거 형태, 층수 | “전세·아파트·10층” | 필수 입력 누락 |  | H | P |
| 41.1.3 |  |  | 매물이 존재하지 않거나 권한이 없으면 경매 생성 불가. | 경매 대상 매물 | 존재하는 본인 매물 | 삭제된 매물 ID, 타인 소유 매물 |  | H | P |
| 41.1.4 |  |  | 소유자가 아닌 사용자는 경매 생성 요청을 할 수 없다. | 경매 생성 요청 | 소유자 계정 | 일반/브로커 계정 요청 |  | H | P |
| 41.1.5 |  |  | 이미 위임된 매물은 경매 생성 불가. | 경매 생성 요청 | 비위임 매물 | 위임된 매물 | 16.1.1 | H | P |
| 41.1.6 |  |  | 최근 30일 내 진행 중 경매가 있으면 중복 생성 불가. | 경매 생성 요청 | 이전 경매 없음 | 최근 30일 내 진행중 경매 존재 |  | H | P |
| 41.1.7 |  |  | 조건 충족 시 새로운 경매 레코드를 생성하고 상태를 ONGOING으로 설정. | 경매 생성 | 정상 생성 | 생성 직후 상태 오류 |  | H | P |
|  41.2  | 입찰 제출 | 브로커가 진행 중인 경매에 입찰 금액을 제출한다. |  |  |  |  |  |  |  |
| 41.2.1 |  |  | 브로커는 진행 중 경매에 입찰할 수 있다. | 입찰 금액 입력칸 | “3억 2천만 원” | 비로그인, 일반 사용자 |  | H | P |
| 41.2.2 |  |  | 종료된 경매에는 입찰할 수 없다. | 입찰하기 버튼 | 진행중 경매 | 종료된 경매 |  | H | P |
| 41.2.3 |  |  | 입찰자는 실제 브로커 계정이어야 한다. | 로그인 계정 | 브로커 | 브로커 아닌 계정 | 11.1.1 | H | P |
| 41.2.4 |  |  | 입찰 금액은 현재 최고 금액보다 커야 한다. | 입찰 금액 | 최고가 초과 금액 | 기존 최고가 이하 |  | H | P |
| 41.2.5 |  |  | 유효 입찰은 저장되고 최고 금액 정보가 갱신된다. | 입찰 정보 | 저장 후 반영 | 반영되지 않음 |  | H | P |
| 41.2.6 |  |  | 새 입찰 등록 시 소유자에게 “새 입찰 도착” 알림 전송. | 입찰 제출 | 정상 알림 | 잘못된 사용자에게 알림 전송 | 17.1.1 | H | P |
| 41.2.7 |  |  | 최고 금액 상회 시 기존 최고 입찰자에게 ‘상회됨’ 알림 전송. | 입찰 금액 | 최고가 초과 | 첫 입찰인데 알림 전송, 초과 아님에도 알림 | 17.1.2 | H | P |
|  41.3  | 입찰 수락 및 종료 | 소유자가 입찰을 선택해 경매를 종료한다. |  |  |  |  |  |  |  |
| 41.3.1 |  |  | 소유자는 특정 입찰을 수락해 경매를 종료할 수 있다. | 수락 버튼 | 정상 종료 | 브로커 계정에서 수락 시도 |  | H | P |
| 41.3.2 |  |  | 소유자가 아닌 사람이 종료 시도 시 권한 오류. | 경매 종료 | 소유자 | 타 사용자 |  | H | P |
| 41.3.3 |  |  | 종료된 경매는 추가 수락이 불가. | 종료 경매 | 오류 반환 | 상태 변경됨 |  | H | P |
| 41.3.4 |  |  | 이미 낙찰된 경매에서는 중복 수락 불가. | 수락 버튼 | 첫 수락만 가능 | 두 번째 수락 |  | H | P |
| 41.3.5 |  |  | 수락 시 상태를 COMPLETED로 변경. | 상태 변경 | COMPLETED 표시 | 상태 미변경 |  | H | P |
| 41.3.6 |  |  | 낙찰된 브로커를 매물 담당자로 지정. | 매물 정보 | 브로커 지정됨 | 잘못된 브로커 지정 | 16.2.1 | H | P |
| 41.3.7 |  |  | 낙찰 금액으로 매물의 최종 조건 생성. | 낙찰 금액 | 매매/전세/월세 조건 생성 | 잘못된 필드에 저장 | 8.1.2, 26.1.3 | H | P |
| 41.3.8 |  |  | 경매 종료 시 모든 참여 브로커에게 종료 알림. | 종료 처리 | 정상 알림 | 일부 누락, 참여하지 않은 사용자에게 발송 | 17.1.1 | H | P |
| 41.3.9 |  |  | 낙찰자에게는 “선정됨”, 비낙찰자에게는 “종료됨” 알림. | 종료 알림 | 정상 분기 | 잘못된 알림 전송 | 17.1.6 | H | P |
|   42   | 매물 비교 기능 |  |  |  |  |  |  | H |  |
|  42.1  |  | 비교 그룹을 생성·삭제·수정·조회한다 |  |  |  |  |  | H |  |
| 42.1.1 |  |  | 사용자는 그룹 이름을 입력하여 새로운 비교 그룹을 생성할 수 있다. | 그룹 생성 버튼 클릭, groupName|"아파트 비교" 입력 후 생성 버튼 클릭|null, 빈 문자열|11.1.1| H |P|
| 42.1.2 |  |  | 그룹 생성·조회·수정·삭제는 로그인 사용자만 가능하며 userId는 인증 토큰으로 확인한다. | userId|유효한 인증 토큰의 userId|null, 만료된 토큰|11.1.1 | H |P|
| 42.1.3 |  |  | 그룹 삭제 시 그룹에 포함된 비교 아이템도 함께 삭제된다. | 그룹 삭제 버튼 클릭, groupId, userId|본인이 생성한 그룹의 삭제 버튼 클릭, 1, 소유자 userId|존재하지 않는 groupId, 타인 소유 그룹| | H |P|
| 42.1.4 |  |  | 사용자는 시스템이 허용하는 최대 그룹 수(예: 50개)를 초과하여 생성할 수 없다. | 그룹 생성 시도, userId|그룹 수 < 10개인 userId|그룹 수 >= 10개인 userId| | H |P|
|  42.2  |  | 비교 그룹 내 비교 아이템(매물)을 관리한다 |  |  |  |  |  | H |  |
| 42.2.1 |  |  | 사용자는 비교 그룹에 매물 ID를 추가할 수 있다. | 매물 추가 버튼 클릭, groupId, propertyId|비교 그룹 선택 후 매물 추가 버튼 클릭, 1, 101|존재하지 않는 groupId, propertyId=999999|8.1.1 | H |P|
| 42.2.2 |  |  | 매물이 존재하지 않거나 조회 권한이 없는 경우 추가를 거부한다. | propertyId|101 (존재하는 매물)|999999 (존재하지 않는 매물), null|8.1.1 | H |P|
| 42.2.3 |  |  | 동일 그룹 내에 같은 매물을 중복 추가할 수 없다. | groupId, propertyId|1, 101 (첫 추가)|1, 101 (중복 추가 시도)| | H |P|
| 42.2.4 |  |  | 그룹의 아이템 수가 시스템 허용 상한(예: 20개)을 넘으면 추가를 제한한다. | groupId|아이템 수 < 3개인 그룹|아이템 수 >= 3개인 그룹| | H |P|
| 42.2.5 |  |  | 동일 그룹·가중치·아이템 조합은 캐시를 적용하여 반복 계산 비용을 최소화한다. | 비교 실행 버튼 클릭, groupId, weights|가중치 설정 후 비교 실행, 1, {priceWeight:0.5, unitPriceWeight:0.3, buildYearWeight:0.2}|가중치 합 <= 0| | H |P|
|   43   | 매물 실거래가 조회 기능 |  |  |  |  |  |  | H |  |
|  43.1  |  | 매물 ID 기반으로 실거래가 RPC 함수를 호출한다 |  |  |  |  |  |  | H |  |
| 43.1.1 |  |  | 클라이언트는 매물 상세 화면 등에서 매물 ID(p_property_id)를 지정해 실거래가 조회 API를 호출한다.| 실거래가 조회 버튼 클릭, propertyId|매물 상세 화면에서 실거래가 조회 버튼 클릭, 101|999999 (존재하지 않는 매물), null, -1|26.1.1 | H | P |
| 43.1.2 |  |  | 서버는 매핑된 RPC 함수(get_deals_by_property_id 등)를 호출해 DB 내 SQL(with prop~candidates)을 실행한다. | propertyId, address|101 (정상 주소 형식의 매물), "서울특별시 강남구 테헤란로"|주소가 null이거나 비정상 형식인 매물|43.2.1 | H | P |
| 43.1.3 |  |  | properties 테이블에 매물이 존재하지 않으면 404 또는 도메인 에러로 즉시 반환한다.| propertyId|101 (존재하는 매물)|999999 (존재하지 않는 매물), null|8.1.2 | H | P |
|  43.2  |  | 매물 주소를 정규화해 시/구/도로명을 추출한다 |  |  |  |  |  | H |  |
| 43.2.1 |  |  | properties.address를 공백 기준으로 분리하여 city_raw, gu, road_full을 추출한다. | address|"서울특별시 강남구 테헤란로 123"|null, "", "주소없음"|8.1.5 | H | P |
| 43.2.2 |  |  | city_raw가 '서울/부산/대구/인천/광주/대전/울산' 등 약칭이면 전체 명칭('서울특별시')으로 매핑한다. | city_raw|"서울", "부산", "대구"|"서울특별시" (이미 전체명칭), "경기도" (매핑 규칙 없음)|43.2.1 | H | P |
| 43.2.3 |  |  | city_raw가 매핑 규칙에 속하지 않으면 원본 값을 그대로 city_full로 사용한다.| city_raw|"경기도", "충청남도"|null, ""|43.2.1 | H | P |
| 43.2.4 |  |  | 주소 구조가 비정상적일 경우 로그를 남기고 빈 배열 또는 처리 가능한 오류로 반환한다. | address|"서울특별시 강남구 테헤란로"|"123", "주소정보없음", "특수문자@#$"|43.2.1 | H | P |
|  43.3  |  | 실거래가 후보를 주소 기반으로 조인하여 가져온다 |  |  |  |  |  | H |  |
| 43.3.1 |  |  | realestate_deals.road_name = road_full, sigungu like (city_full or ' ' or gu or '%') 조건으로 후보 레코드를 조회한다. | road_full, city_full, gu|"테헤란로", "서울특별시", "강남구"|null, 매칭되는 레코드 없음|43.2.1 | H | P |
| 43.3.2 |  |  | (contract_ym or lpad(contract_day, 2, '0'))::int 형태의 contract_date_int를 계산한다.| contract_ym, contract_day|202401, 15|null, 0, 음수|43.3.1 | H | P |
| 43.3.3 |  |  | 향후 주소 매칭 규칙이 변경되더라도 RPC 함수 인터페이스는 동일(p_property_id 입력, 일정 출력 스키마)하게 유지한다. | propertyId|101 (정상 매물)|인터페이스 변경 없음|43.1.1 | H | P |
| 43.3.4 |  |  | 동일 도로명 매칭 실패 시, '동 단위 매칭' 등 fallback 매칭 단계도 추가할 수 있도록 설계한다.| road_full|"테헤란로" (매칭 실패 시)|fallback 매칭도 실패|43.3.1 | H | P |
|  43.4  |  | 실거래가 응답 구조 정의 및 정렬 처리 |  |  |  |  |  | H |  |
| 43.4.1 |  |  | RPC 결과는 address, complex_name, area_m2, price_10k, dong, floor, contract_date_int을 포함한다.| RPC 결과 | 정상 조회된 실거래 레코드 | 빈 결과셋 | 43.3.1 | H | P |
| 43.4.2 |  |  | 애플리케이션 계층은 결과를 DealResponse, DealsListResponse 등의 DTO로 매핑해 반환한다.| RPC 결과 | 정상 DTO 매핑 | DTO 필드 누락, 타입 불일치 | 43.4.1 | H | P |
| 43.4.3 |  |  | 반환 리스트는 contract_date_int 오름차순(과거 → 최신)으로 정렬한다. | 실거래 리스트 | 2건 이상의 정상 리스트 | 빈 리스트, contract_date_int null | 43.4.1 | H | P |
| 43.4.4 |  |  | 거래가 없는 경우에도 200 OK + 빈 배열을 반환한다.| propertyId|101 (실거래 이력 없는 매물)|null, 존재하지 않는 매물|43.1.1 | H | P |
|   44   | 이상 매물 자동 탐지 기능 |  |  |  |  |  |  | H |  |
|  44.1  |  | 매물 등록·수정 시 실거래가 기반 이상 여부를 자동 판정한다 |  |  |  |  |  | H |  |
| 44.1.1 |  |  | properties 테이블에 매물이 등록되거나 수정될 때, BEFORE INSERT OR UPDATE 트리거로 해당 함수가 자동 실행된다. | 매물 등록/수정 저장 버튼 클릭 | 정상 매물 정보 입력 후 저장 | 트리거 비활성화 상태 | 8.1.2 | H | P |
| 44.1.2 |  |  | 트리거 함수는 NEW 레코드의 price, address, area_m2 등을 활용해 같은 트랜잭션 안에서 anomaly_alert 값을 결정한다.| 매물 저장 버튼 클릭, NEW.price, NEW.address, NEW.area_m2|정상 저장, 500000000 (5억), "서울특별시 강남구 테헤란로", 84.5|null, 0, ""|44.2.1 | H | P |
| 44.1.3 |  |  | 트리거 실행 실패 시 매물 등록/수정 전체가 롤백되도록 하거나, 정책에 따라 anomaly_alert만 null로 두고 진행하도록 설정할 수 있다. | 매물 저장 시도 | 정상 저장 | 트리거 함수 오류, DB 연결 실패 | 44.1.1 | H | P |
|  44.2  |  | 매물의 주소·가격·면적을 사전 검증하고 전처리한다 |  |  |  |  |  | H |  |
| 44.2.1 |  |  | NEW.price 또는 NEW.address가 null인 경우, 이상 여부를 판단할 수 없으므로 NEW.anomaly_alert를 null로 설정하고 바로 반환한다. | NEW.price, NEW.address | null, "서울특별시 강남구" | 둘 다 null, price=0 | 44.1.2 | H | P |
| 44.2.2 |  |  | NEW.area_m2가 있는 경우, 실거래 매칭 시 면적 ±10% 범위(d.area_m2 between NEW.area_m2 * 0.9 and NEW.area_m2 * 1.1)를 사용한다. | NEW.area_m2 | 84.5 (면적 존재) | null, 0, 음수 | 44.1.2 | H | P |
| 44.2.3 |  |  | NEW.area_m2가 null인 경우, 면적 조건은 건너뛰고 주소 기준만으로 실거래 후보를 조회한다. | NEW.area_m2 | null | 0, 음수 | 44.2.2 | H | P |
| 44.2.4 |  |  | 매물 가격은 원 단위로 저장되어 있으며, 분석 시에는 10,000으로 나누어 v_prop_price_10k(만원 단위)로 변환해 사용한다.| NEW.price | 500000000 (5억 원) | null, 0, 음수 | 44.1.2 | H | P |
|  44.3  |  | 주소 정규화 후 strict/loose 매칭으로 실거래 후보를 조회한다 |  |  |  |  |  | H |  |
| 44.3.1 |  |  | NEW.address를 공백 기준으로 분리해 city_raw(1번째), gu(2번째), road_full(나머지)를 추출한다. | NEW.address | "서울특별시 강남구 테헤란로 123" | null, "", "주소정보없음" | 44.2.1 | H | P |
| 44.3.2 |  |  | city_raw 값이 '서울/부산/대구/인천/광주/대전/울산'인 경우 각각 '서울특별시/부산광역시/…' 형태의 전체 명칭으로 매핑한다. | city_raw | "서울", "부산" | "서울특별시" (이미 전체명칭), "경기도" (매핑 규칙 없음) | 44.3.1 | H | P |
| 44.3.3 |  |  | strict_candidates는 realestate_deals에서 road_name = road_full AND sigungu like (city_full or ' ' or gu or '%') 조건으로 조회한다. | road_full, city_full, gu | "테헤란로", "서울특별시", "강남구" | null, 매칭되는 레코드 없음 | 44.3.1 | H | P |
| 44.3.4 |  |  | loose_candidates는 도로명을 무시하고 sigungu like (city_full or ' ' or gu or '%') 조건만 사용해 조회한다(면적 범위 조건은 동일). | city_full, gu | "서울특별시", "강남구" | null, 매칭되는 레코드 없음 | 44.3.3 | H | P |
| 44.3.5 |  |  | strict_candidates에 한 건이라도 존재하면 strict_candidates만 사용하고, 없을 때에만 loose_candidates를 사용한다. | strict_candidates | 1건 이상 존재 | 빈 결과셋 (loose로 전환) | 44.3.3 | H | P |
| 44.3.6 |  |  | 각 후보 레코드에 대해 (contract_ym or lpad(contract_day::text, 2, '0'))::int를 contract_date_int로 계산해 필요 시 정렬 등에 활용할 수 있다. | contract_ym, contract_day | 202401, 15 | null, 0, 음수 | 44.3.5 | H | P |
|  44.4  |  | 실거래 평균 대비 편차를 계산해 이상 여부 플래그를 결정한다 |  |  |  |  |  | H |  |
| 44.4.1 |  |  | strict/loose 통합 결과(final_candidates)에 대해 avg(price_10k)를 계산하여 v_avg_price_10k(만원 단위 실거래 평균)를 구한다.| final_candidates | 1건 이상의 실거래 레코드 | 빈 결과셋 | 44.3.5 | H | P |
| 44.4.2 |  |  | final_candidates가 비어 있거나 v_avg_price_10k가 null이면 이상 여부를 판단할 수 없으므로 NEW.anomaly_alert를 null로 설정한다. | final_candidates, v_avg_price_10k | 빈 결과셋, null | 정상 계산된 평균값 | 44.4.1 | H | P |
| 44.4.3 |  |  | v_deviation_ratio는 abs(v_prop_price_10k - v_avg_price_10k) / nullif(v_avg_price_10k, 0) 공식으로 계산한다. | v_prop_price_10k, v_avg_price_10k | 50000 (5억), 40000 (4억) | v_avg_price_10k = 0 | 44.4.1 | H | P |
| 44.4.4 |  |  | v_deviation_ratio > 0.30(30% 초과)인 경우 NEW.anomaly_alert를 true로 설정한다.| v_deviation_ratio | 0.35 (35% 편차) | 0.25 (25% 편차) | 44.4.3 | H | P |
| 44.4.5 |  |  | v_deviation_ratio가 0.30 이하인 경우 NEW.anomaly_alert를 false로 설정한다.| v_deviation_ratio | 0.25 (25% 편차) | 0.35 (35% 편차) | 44.4.3 | H | P |
| 44.4.6 |  |  | v_avg_price_10k가 0 또는 극단적으로 작은 값인 경우 nullif를 통해 0으로 나누는 오류를 방지한다. | v_avg_price_10k | 0, 0.001 | 정상 값 (예: 40000) | 44.4.3 | H | P |
