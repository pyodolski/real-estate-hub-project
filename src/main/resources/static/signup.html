<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ë¶€ë™ì‚° ì„œë¹„ìŠ¤ íšŒì›ê°€ì…</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Google Fonts (Inter & Noto Sans KR) -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
          href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+KR:wght@400;500;700&display=swap"
          rel="stylesheet"
  />

  <style>
    body {
      font-family: "Inter", "Noto Sans KR", sans-serif;
    }
  </style>
</head>
<body
        class="bg-gray-100 min-h-screen flex items-center justify-center px-4 py-8"
>
<div class="w-full max-w-lg">
  <!-- íšŒì›ê°€ì… ì¹´ë“œ -->
  <div class="bg-white rounded-3xl shadow-lg overflow-hidden">
    <!-- í—¤ë” -->
    <div class="px-6 pt-6 pb-4 text-center">
      <!-- ë¡œê³  -->
      <div class="mb-4">
        <div
                class="w-16 h-16 mx-auto bg-green-400 rounded-2xl flex items-center justify-center mb-3"
        >
          <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-8 w-8 text-white"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
          >
            <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m0 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1h3a1 1 0 001-1V10m-9-10"
            />
          </svg>
        </div>
        <h1 class="text-xl font-bold text-gray-800">íšŒì›ê°€ì…</h1>
        <p class="text-gray-600 text-sm mt-1">ìƒˆë¡œìš´ ê³„ì •ì„ ë§Œë“¤ì–´ë³´ì„¸ìš”</p>
      </div>
    </div>

    <!-- íšŒì›ê°€ì… í¼ -->
    <div class="px-6 pb-6">
      <form id="signupForm" class="space-y-4">
        <!-- ì‚¬ìš©ì ìœ í˜• ì„ íƒ (í•„ìˆ˜) -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-3">
            ì‚¬ìš©ì ìœ í˜• <span class="text-red-500">*</span>
          </label>
          <div class="grid grid-cols-1 gap-2">
            <label class="relative cursor-pointer">
              <input
                      type="radio"
                      name="roleId"
                      value="regular"
                      class="sr-only peer"
                      checked
              />
              <div
                      class="p-3 border-2 border-gray-200 rounded-2xl text-center peer-checked:border-green-400 peer-checked:bg-green-50 transition-all"
              >
                <div class="flex items-center">
                  <svg
                          xmlns="http://www.w3.org/2000/svg"
                          class="h-5 w-5 mr-3 text-gray-600 peer-checked:text-green-600"
                          fill="none"
                          viewBox="0 0 24 24"
                          stroke="currentColor"
                          stroke-width="2"
                  >
                    <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
                    />
                  </svg>
                  <div class="text-left">
                        <span class="text-sm font-medium text-gray-900"
                        >ì¼ë°˜ ì‚¬ìš©ì</span
                        >
                    <p class="text-xs text-gray-500">ë§¤ë¬¼ ê²€ìƒ‰ ë° ì¡°íšŒ</p>
                  </div>
                </div>
              </div>
            </label>

            <label class="relative cursor-pointer">
              <input
                      type="radio"
                      name="roleId"
                      value="broker"
                      class="sr-only peer"
              />
              <div
                      class="p-3 border-2 border-gray-200 rounded-2xl text-center peer-checked:border-green-400 peer-checked:bg-green-50 transition-all"
              >
                <div class="flex items-center">
                  <svg
                          xmlns="http://www.w3.org/2000/svg"
                          class="h-5 w-5 mr-3 text-gray-600 peer-checked:text-green-600"
                          fill="none"
                          viewBox="0 0 24 24"
                          stroke="currentColor"
                          stroke-width="2"
                  >
                    <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"
                    />
                  </svg>
                  <div class="text-left">
                        <span class="text-sm font-medium text-gray-900"
                        >ì¤‘ê°œì¸</span
                        >
                    <p class="text-xs text-gray-500">
                      ë§¤ë¬¼ ë“±ë¡ ë° ì¤‘ê°œ ì—…ë¬´
                    </p>
                  </div>
                </div>
              </div>
            </label>

            <label class="relative cursor-pointer">
              <input
                      type="radio"
                      name="roleId"
                      value="admin"
                      class="sr-only peer"
              />
              <div
                      class="p-3 border-2 border-gray-200 rounded-2xl text-center peer-checked:border-red-400 peer-checked:bg-red-50 transition-all"
              >
                <div class="flex items-center">
                  <svg
                          xmlns="http://www.w3.org/2000/svg"
                          class="h-5 w-5 mr-3 text-gray-600 peer-checked:text-red-600"
                          fill="none"
                          viewBox="0 0 24 24"
                          stroke="currentColor"
                          stroke-width="2"
                  >
                    <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"
                    />
                  </svg>
                  <div class="text-left">
                        <span class="text-sm font-medium text-gray-900"
                        >ê´€ë¦¬ì</span
                        >
                    <p class="text-xs text-gray-500">ì‹œìŠ¤í…œ ê´€ë¦¬ ë° ìš´ì˜</p>
                  </div>
                </div>
              </div>
            </label>
          </div>
        </div>

        <!-- í•„ìˆ˜ ì •ë³´ ì„¹ì…˜ -->
        <div class="border-t pt-4">
          <h3 class="text-sm font-medium text-gray-700 mb-3">í•„ìˆ˜ ì •ë³´</h3>

          <!-- ì´ë©”ì¼ ì…ë ¥ (í•„ìˆ˜) -->
          <div class="mb-4">
            <label
                    for="email"
                    class="block text-sm font-medium text-gray-700 mb-2"
            >
              ì´ë©”ì¼ <span class="text-red-500">*</span>
            </label>
            <input
                    type="email"
                    id="email"
                    name="email"
                    required
                    class="w-full px-3 py-2 border border-gray-300 rounded-2xl focus:outline-none focus:border-green-400 focus:ring-1 focus:ring-green-400"
                    placeholder="example@email.com"
            />
          </div>

          <!-- ì‚¬ìš©ìëª… ì…ë ¥ (í•„ìˆ˜) -->
          <div class="mb-4">
            <label
                    for="username"
                    class="block text-sm font-medium text-gray-700 mb-2"
            >
              ì‚¬ìš©ìëª… <span class="text-red-500">*</span>
            </label>
            <input
                    type="text"
                    id="username"
                    name="username"
                    required
                    class="w-full px-3 py-2 border border-gray-300 rounded-2xl focus:outline-none focus:border-green-400 focus:ring-1 focus:ring-green-400"
                    placeholder="ì‚¬ìš©ìëª… ë˜ëŠ” ë‹‰ë„¤ì„"
            />
          </div>

          <!-- ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ (í•„ìˆ˜) -->
          <div class="mb-4">
            <label
                    for="password"
                    class="block text-sm font-medium text-gray-700 mb-2"
            >
              ë¹„ë°€ë²ˆí˜¸ <span class="text-red-500">*</span>
              <small class="text-gray-500">(8ì ì´ìƒ)</small>
            </label>
            <input
                    type="password"
                    id="password"
                    name="password"
                    required
                    minlength="8"
                    class="w-full px-3 py-2 border border-gray-300 rounded-2xl focus:outline-none focus:border-green-400 focus:ring-1 focus:ring-green-400"
                    placeholder="8ì ì´ìƒì˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
            />
          </div>

          <!-- ë¹„ë°€ë²ˆí˜¸ í™•ì¸ (í•„ìˆ˜) -->
          <div class="mb-4">
            <label
                    for="confirmPassword"
                    class="block text-sm font-medium text-gray-700 mb-2"
            >
              ë¹„ë°€ë²ˆí˜¸ í™•ì¸ <span class="text-red-500">*</span>
            </label>
            <input
                    type="password"
                    id="confirmPassword"
                    name="confirmPassword"
                    required
                    class="w-full px-3 py-2 border border-gray-300 rounded-2xl focus:outline-none focus:border-green-400 focus:ring-1 focus:ring-green-400"
                    placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”"
            />
          </div>
        </div>

        <div class="border-t pt-4">

          <!-- í”„ë¡œí•„ ì´ë¯¸ì§€ (ì„ íƒ) -->
          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 mb-2">
              í”„ë¡œí•„ ì´ë¯¸ì§€
            </label>
            <div class="flex items-center gap-4">
              <div
                      class="w-16 h-16 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden"
              >
                <img
                        id="profileImagePreview"
                        src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face"
                        alt=""
                        class="w-full h-full object-cover"
                />
              </div>
              <div>
                <button
                        type="button"
                        id="profileImageSelectButton"
                        class="px-3 py-1.5 text-xs bg-gray-100 hover:bg-gray-200 rounded-xl border border-gray-300 text-gray-700 transition-colors"
                >
                  ì´ë¯¸ì§€ ì„ íƒ
                </button>
                <p class="text-xs text-gray-500 mt-1">
                  PNG, JPG ë“± ì´ë¯¸ì§€ íŒŒì¼ì„ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                </p>
              </div>
            </div>
            <input
                    type="file"
                    id="profileImage"
                    name="profileImage"
                    accept="image/*"
                    class="hidden"
            />
          </div>

          <!-- ì „í™”ë²ˆí˜¸ ì…ë ¥ (ì„ íƒ) -->
          <div class="mb-4">
            <label
                    for="phoneNumber"
                    class="block text-sm font-medium text-gray-700 mb-2"
            >ì „í™”ë²ˆí˜¸</label
            >
            <input
                    type="tel"
                    id="phoneNumber"
                    name="phoneNumber"
                    class="w-full px-3 py-2 border border-gray-300 rounded-2xl focus:outline-none focus:border-green-400 focus:ring-1 focus:ring-green-400"
                    placeholder="010-0000-0000"
            />
          </div>

          <!-- ìê¸°ì†Œê°œ ì…ë ¥ (ì„ íƒ) -->
          <div class="mb-4">
            <label
                    for="intro"
                    class="block text-sm font-medium text-gray-700 mb-2"
            >ìê¸°ì†Œê°œ</label
            >
            <textarea
                    id="intro"
                    name="intro"
                    rows="3"
                    class="w-full px-3 py-2 border border-gray-300 rounded-2xl focus:outline-none focus:border-green-400 focus:ring-1 focus:ring-green-400 resize-none"
                    placeholder="ê°„ë‹¨í•œ ìê¸°ì†Œê°œë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”"
            ></textarea>
          </div>
        </div>

        <!-- ì¤‘ê°œì¸ ì „ìš© ì •ë³´ ì„¹ì…˜ (ë™ì ìœ¼ë¡œ í‘œì‹œ/ìˆ¨ê¹€) -->
        <div id="brokerFields" class="border-t pt-4 hidden">
          <h3 class="text-sm font-medium text-gray-700 mb-3">
            ì¤‘ê°œì¸ ì •ë³´
          </h3>

          <!-- ì¤‘ê°œì‚¬ ë©´í—ˆ ë²ˆí˜¸ ì…ë ¥ (ì¤‘ê°œì¸ í•„ìˆ˜) -->
          <div class="mb-4">
            <label
                    for="licenseNumber"
                    class="block text-sm font-medium text-gray-700 mb-2"
            >
              ì¤‘ê°œì‚¬ ë©´í—ˆ ë²ˆí˜¸ <span class="text-red-500">*</span>
            </label>
            <input
                    type="text"
                    id="licenseNumber"
                    name="licenseNumber"
                    class="w-full px-3 py-2 border border-gray-300 rounded-2xl focus:outline-none focus:border-green-400 focus:ring-1 focus:ring-green-400"
                    placeholder="ì¤‘ê°œì‚¬ ë©´í—ˆ ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
            />
          </div>

          <!-- ì†Œì† ì¤‘ê°œì‚¬ë¬´ì†Œ ì…ë ¥ (ì¤‘ê°œì¸ ì„ íƒ) -->
          <div class="mb-4">
            <label
                    for="agencyName"
                    class="block text-sm font-medium text-gray-700 mb-2"
            >ì†Œì† ì¤‘ê°œì‚¬ë¬´ì†Œ</label
            >
            <input
                    type="text"
                    id="agencyName"
                    name="agencyName"
                    class="w-full px-3 py-2 border border-gray-300 rounded-2xl focus:outline-none focus:border-green-400 focus:ring-1 focus:ring-green-400"
                    placeholder="ì†Œì† ì¤‘ê°œì‚¬ë¬´ì†Œëª…ì„ ì…ë ¥í•˜ì„¸ìš”"
            />
          </div>
        </div>

        <!-- ì´ìš©ì•½ê´€ ë™ì˜ -->
        <div class="border-t pt-4">
          <label class="flex items-start">
            <input
                    type="checkbox"
                    id="agreeTerms"
                    required
                    class="mt-1 rounded border-gray-300 text-green-400 focus:ring-green-400"
            />
            <span class="ml-2 text-sm text-gray-600">
                  <span class="text-red-500">*</span>
                  <a
                          href="#"
                          class="text-green-500 hover:text-green-700 underline"
                  >ì´ìš©ì•½ê´€</a
                  >
                  ë°
                  <a
                          href="#"
                          class="text-green-500 hover:text-green-700 underline"
                  >ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a
                  >ì— ë™ì˜í•©ë‹ˆë‹¤.
                </span>
          </label>
        </div>

        <!-- íšŒì›ê°€ì… ë²„íŠ¼ -->
        <button
                type="submit"
                class="w-full bg-green-400 hover:bg-green-500 text-white font-medium py-2 px-4 rounded-2xl transition-colors mt-6"
        >
          íšŒì›ê°€ì…
        </button>

        <!-- ë¡œê·¸ì¸ ë§í¬ -->
        <div class="text-center">
          <p class="text-sm text-gray-600">
            ì´ë¯¸ ê³„ì •ì´ ìˆìœ¼ì‹ ê°€ìš”?
            <a
                    href="loginX.html"
                    class="text-green-500 hover:text-green-700 font-medium"
            >ë¡œê·¸ì¸</a
            >
          </p>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- ES6 Module Script -->
<script type="module">
  const signupForm = document.getElementById("signupForm");
  const profileImageInput = document.getElementById("profileImage");
  const profileImagePreview = document.getElementById(
    "profileImagePreview"
  );
  const profileImageSelectButton = document.getElementById(
    "profileImageSelectButton"
  );

  // ì´ë¯¸ì§€ ì„ íƒ ë²„íŠ¼ â†’ íŒŒì¼ ì„ íƒì°½ ì—´ê¸°
  profileImageSelectButton.addEventListener("click", () => {
    profileImageInput.click();
  });

  // íŒŒì¼ ì„ íƒ ì‹œ ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸
  profileImageInput.addEventListener("change", (e) => {
    const file = e.target.files && e.target.files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = (event) => {
      profileImagePreview.src = event.target.result;
    };
    reader.readAsDataURL(file);
  });

  // í¼ ì œì¶œ ì²˜ë¦¬
  signupForm.addEventListener("submit", function (e) {
    e.preventDefault();

    const formData = new FormData(this);
    const password = formData.get("password");
    const confirmPassword = formData.get("confirmPassword");
    const agreeTerms = document.getElementById("agreeTerms").checked;

    // ë¹„ë°€ë²ˆí˜¸ ê¸¸ì´ í™•ì¸
    if (password.length < 8) {
      alert("ë¹„ë°€ë²ˆí˜¸ëŠ” 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.");
      return;
    }

    // ë¹„ë°€ë²ˆí˜¸ í™•ì¸
    if (password !== confirmPassword) {
      alert("ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
      return;
    }

    // ì´ìš©ì•½ê´€ ë™ì˜ í™•ì¸
    if (!agreeTerms) {
      alert("ì´ìš©ì•½ê´€ì— ë™ì˜í•´ì£¼ì„¸ìš”.");
      return;
    }

    // ë¡œë”© ì• ë‹ˆë©”ì´ì…˜
    const submitButton = this.querySelector('button[type="submit"]');
    const originalText = submitButton.innerHTML;
    submitButton.innerHTML = "ê°€ì… ì¤‘...";
    submitButton.disabled = true;

    // ì„ íƒëœ ì—­í•  í™•ì¸
    const selectedRole = formData.get("roleId");

    // ì¤‘ê°œì¸ ì„ íƒ ì‹œ í•„ìˆ˜ í•„ë“œ ê²€ì¦
    if (selectedRole === "broker") {
      const licenseNumber = formData.get("licenseNumber");
      if (!licenseNumber || licenseNumber.trim() === "") {
        alert("ì¤‘ê°œì‚¬ ë©´í—ˆ ë²ˆí˜¸ëŠ” í•„ìˆ˜ ì…ë ¥ í•­ëª©ì…ë‹ˆë‹¤.");
        submitButton.innerHTML = originalText;
        submitButton.disabled = false;
        return;
      }
    }

    // ì‹¤ì œ íšŒì›ê°€ì… ìš”ì²­ì„ ë³´ë‚´ëŠ” í•¨ìˆ˜
    const doSignup = (profileImageDataUrl) => {
      const signupData = {
        email: formData.get("email"),
        username: formData.get("username"),
        password: formData.get("password"),
        role: selectedRole,
        phoneNumber: formData.get("phoneNumber") || null,
        intro: formData.get("intro") || null,
        // ğŸ”¹ íŒŒì¼ì„ ì„ íƒí•œ ê²½ìš° data URL(Base64)ì„ ê·¸ëŒ€ë¡œ ë³´ëƒ„
        //    (ë‚˜ì¤‘ì— ì„œë²„ì—ì„œ URLì´ë“  data URLì´ë“  ì•Œì•„ì„œ ì²˜ë¦¬)
        profileImageUrl: profileImageDataUrl,
        licenseNumber:
          selectedRole === "broker" ? formData.get("licenseNumber") : null,
        agencyName:
          selectedRole === "broker" ? formData.get("agencyName") : null,
      };

      console.log("íšŒì›ê°€ì… ë°ì´í„°:", signupData);

      fetch("/api/auth/signup", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify(signupData),
      })
        .then((response) => {
          console.log("ì‘ë‹µ ìƒíƒœ:", response.status);
          if (!response.ok) {
            return response.text().then((text) => {
              console.error("ì—ëŸ¬ ì‘ë‹µ:", text);
              let errorMessage = text;
              try {
                const errorJson = JSON.parse(text);
                errorMessage =
                  errorJson.error || errorJson.message || text;
              } catch (e) {
                // JSON íŒŒì‹± ì‹¤íŒ¨ì‹œ ì›ë³¸ í…ìŠ¤íŠ¸ ì‚¬ìš©
              }
              throw new Error(errorMessage || "íšŒì›ê°€ì…ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
            });
          }
          return response;
        })
        .then(() => {
          alert("íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.");
          window.location.href = "loginX.html";
        })
        .catch((error) => {
          console.error("íšŒì›ê°€ì… ì˜¤ë¥˜:", error);
          alert(
            error.message ||
              "íšŒì›ê°€ì… ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”."
          );

          // ë²„íŠ¼ ìƒíƒœ ë³µì›
          submitButton.innerHTML = originalText;
          submitButton.disabled = false;
        });
    };

    // í”„ë¡œí•„ ì´ë¯¸ì§€ íŒŒì¼ â†’ data URLë¡œ ë³€í™˜ í›„ íšŒì›ê°€ì… ìš”ì²­
    const file = profileImageInput.files && profileImageInput.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = (event) => {
        const dataUrl = event.target.result; // "data:image/..;base64,...."
        doSignup(dataUrl);
      };
      reader.onerror = () => {
        alert("í”„ë¡œí•„ ì´ë¯¸ì§€ ë³€í™˜ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
        submitButton.innerHTML = originalText;
        submitButton.disabled = false;
      };
      reader.readAsDataURL(file);
    } else {
      // ì´ë¯¸ì§€ ì„ íƒ ì•ˆ í•œ ê²½ìš° ê·¸ëƒ¥ null ë¡œ ë³´ëƒ„
      doSignup(null);
    }
  });

  // ì‚¬ìš©ì ìœ í˜• ë³€ê²½ ì‹œ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸ ë° ì¤‘ê°œì¸ í•„ë“œ í‘œì‹œ/ìˆ¨ê¹€
  document.querySelectorAll('input[name="roleId"]').forEach((radio) => {
    radio.addEventListener("change", function () {
      // ëª¨ë“  ë¼ë²¨ì—ì„œ ì„ íƒëœ ìŠ¤íƒ€ì¼ ì œê±°
      document.querySelectorAll('input[name="roleId"]').forEach((r) => {
        const label = r.closest("label");
        const div = label.querySelector("div");
        if (r.value === "admin") {
          div.classList.remove("border-red-400", "bg-red-50");
        } else {
          div.classList.remove("border-green-400", "bg-green-50");
        }
        div.classList.add("border-gray-200");
      });

      // ì„ íƒëœ ë¼ë²¨ì— ìŠ¤íƒ€ì¼ ì ìš©
      const parentLabel = this.closest("label");
      const div = parentLabel.querySelector("div");
      if (this.value === "admin") {
        div.classList.add("border-red-400", "bg-red-50");
      } else {
        div.classList.add("border-green-400", "bg-green-50");
      }
      div.classList.remove("border-gray-200");

      // ì¤‘ê°œì¸ ì „ìš© í•„ë“œ í‘œì‹œ/ìˆ¨ê¹€
      const brokerFields = document.getElementById("brokerFields");
      const licenseNumberInput = document.getElementById("licenseNumber");
      const agencyNameInput = document.getElementById("agencyName");

      if (this.value === "broker") {
        brokerFields.classList.remove("hidden");
        licenseNumberInput.required = true;
      } else {
        brokerFields.classList.add("hidden");
        licenseNumberInput.required = false;
        licenseNumberInput.value = "";
        agencyNameInput.value = "";
      }
    });
  });
</script>
</body>
</html>
